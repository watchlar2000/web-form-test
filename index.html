<!DOCTYPE html>
<html>
  <head>
    <title>Test Iframe Referrer</title>
  </head>
  <body>
    <h1>Testing Web Form Embed</h1>
<iframe id="pss-web-form"
  src="http://localhost:5500/api/public/web-form/45"
  frameborder="0"
  style="position: static; display: block;
  width: 100%; border: none; overflow: hidden;">
</iframe>
<a href="https://weeklytest.pavementsoft.net/client-portal/web-form/45">Contact Us</a>
  </body>

<script>
 	window.addEventListener('message', (event) => {
	 	switch (event.data?.action) {
			case 'SET_PSS_WEB_FORM_HEIGHT': {
				document.getElementById("pss-web-form").style.height = (event.data.height + 30) + 'px';
				break;
			}
			case 'PSS_WEB_FORM_REDIRECT': {
				window.location.href = event.data.redirectUrl;
				break;
			}
			default: {
				break;
			}
		}	
	});

	const inputReferringWebsite = document.getElementById('referringWebsite');

	if (inputReferringWebsite) {
		inputReferringWebsite.value = document.referrer
			? new URL(document.referrer).origin
			: '';
	}
</script>
</html>
